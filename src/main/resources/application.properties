# ===================================================================
# CONFIGURAÇÃO DE AMBIENTE DE TESTE (H2 EM MEMÓRIA)
# ===================================================================

# 1. Conexão com Banco em Memória
# MODE=MySQL garante que comandos específicos do MySQL funcionem no H2
spring.datasource.url=jdbc:h2:mem:ddcosmeticos_test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MySQL
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# 2. Configuração do Hibernate para Testes
# Importante: Usar o dialeto H2 para evitar erros de versão do MySQL
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# 3. Gerenciamento do Schema (Tabelas)
# create-drop: Cria as tabelas ao iniciar o teste e apaga ao finalizar
spring.jpa.hibernate.ddl-auto=create-drop

# 4. Logs SQL (Opcional: Mude para false se poluir muito o terminal)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# 5. Desativar Flyway (se estiver usando) para deixar o Hibernate criar as tabelas
spring.flyway.enabled=false

# 6. Console do H2 (para debug se necessário)
spring.h2.console.enabled=true